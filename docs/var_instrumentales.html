<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>9&nbsp; Variables instrumentales – Diseños experimentales y cuasiexperimentales</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./reg_discontinua.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>


</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./var_instrumentales.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Variables instrumentales</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Buscar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Diseños experimentales y cuasiexperimentales</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Alternar modo oscuro"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Alternar modo lector">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefacio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">R y el tidyverse</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_stat.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Repaso de probabilidad y estadística</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./potential_outcomes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title"><em>Potential outcomes</em></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dags.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Grafos acíclicos dirigidos (DAGS)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exp_aleatorios.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Experimentos aleatorios</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./matching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Subclasificación y <em>matching</em></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./diff_in_diff.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Diferencias en diferencias</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reg_discontinua.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Regresión discontinua</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./var_instrumentales.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Variables instrumentales</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referencias</span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#historia-de-las-variables-instrumentales-padre-e-hijo" id="toc-historia-de-las-variables-instrumentales-padre-e-hijo" class="nav-link active" data-scroll-target="#historia-de-las-variables-instrumentales-padre-e-hijo"><span class="header-section-number">9.1</span> Historia de las Variables Instrumentales: Padre e Hijo</a></li>
  <li><a href="#intuición-de-las-variables-instrumentales" id="toc-intuición-de-las-variables-instrumentales" class="nav-link" data-scroll-target="#intuición-de-las-variables-instrumentales"><span class="header-section-number">9.2</span> Intuición de las Variables Instrumentales</a>
  <ul class="collapse">
  <li><a href="#el-dag-canónico-de-vi" id="toc-el-dag-canónico-de-vi" class="nav-link" data-scroll-target="#el-dag-canónico-de-vi"><span class="header-section-number">9.2.1</span> El DAG Canónico de VI</a></li>
  <li><a href="#los-buenos-instrumentos-deben-parecer-extraños" id="toc-los-buenos-instrumentos-deben-parecer-extraños" class="nav-link" data-scroll-target="#los-buenos-instrumentos-deben-parecer-extraños"><span class="header-section-number">9.2.2</span> Los Buenos Instrumentos Deben Parecer Extraños</a></li>
  </ul></li>
  <li><a href="#efectos-de-tratamiento-homogéneos-y-los-estimadores-de-dos-etapas-de-mínimos-cuadrados-2sls" id="toc-efectos-de-tratamiento-homogéneos-y-los-estimadores-de-dos-etapas-de-mínimos-cuadrados-2sls" class="nav-link" data-scroll-target="#efectos-de-tratamiento-homogéneos-y-los-estimadores-de-dos-etapas-de-mínimos-cuadrados-2sls"><span class="header-section-number">9.3</span> Efectos de Tratamiento Homogéneos y los Estimadores de Dos Etapas de Mínimos Cuadrados (2SLS)</a></li>
  <li><a href="#el-problema-de-los-instrumentos-débiles" id="toc-el-problema-de-los-instrumentos-débiles" class="nav-link" data-scroll-target="#el-problema-de-los-instrumentos-débiles"><span class="header-section-number">9.4</span> El Problema de los Instrumentos Débiles</a></li>
  <li><a href="#efectos-de-tratamiento-heterogéneos" id="toc-efectos-de-tratamiento-heterogéneos" class="nav-link" data-scroll-target="#efectos-de-tratamiento-heterogéneos"><span class="header-section-number">9.5</span> Efectos de Tratamiento Heterogéneos</a></li>
  <li><a href="#ejemplo-conscripción-y-crimen-evidencia-de-la-lotería-del-servicio-militar-obligatorio-en-argentina" id="toc-ejemplo-conscripción-y-crimen-evidencia-de-la-lotería-del-servicio-militar-obligatorio-en-argentina" class="nav-link" data-scroll-target="#ejemplo-conscripción-y-crimen-evidencia-de-la-lotería-del-servicio-militar-obligatorio-en-argentina"><span class="header-section-number">9.6</span> Ejemplo: Conscripción y Crimen: Evidencia de la Lotería del Servicio Militar Obligatorio en Argentina</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-random-exp" class="quarto-section-identifier"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Variables instrumentales</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
💀 ¡¡¡CUIDADO!!! 💀
</div>
</div>
<div class="callout-body-container callout-body">
<p>👁 Versión generada con NotebookLM a partir de los capítulos sobre el tema de <span class="citation" data-cites="cunningham2021causal">Cunningham (<a href="references.html#ref-cunningham2021causal" role="doc-biblioref">2021</a>)</span> y <span class="citation" data-cites="huntington2021effect">Huntington-Klein (<a href="references.html#ref-huntington2021effect" role="doc-biblioref">2021</a>)</span>. Consumir bajo su propio riesgo ya que la información <strong>no está chequeada</strong>. 👁</p>
</div>
</div>
<div class="no-row-height column-margin column-container"><div id="ref-huntington2021effect" class="csl-entry" role="listitem">
Huntington-Klein, Nick. 2021. <em>The effect: An introduction to research design and causality</em>. Chapman; Hall/CRC.
</div></div><div class="no-row-height column-margin column-container"><div id="ref-cunningham2021causal" class="csl-entry" role="listitem">
Cunningham, Scott. 2021. <em>Causal inference: The mixtape</em>. Yale university press.
</div></div><p>Así como Arquímedes dijo: “Dadme un punto de apoyo, y moveré el mundo,” con una variable instrumental lo suficientemente buena, se podría decir que es posible identificar cualquier efecto causal. Si bien esto es una hipérbole, el diseño de <strong>variables instrumentales (VI)</strong> es potencialmente uno de los diseños de investigación más importantes jamás concebidos. Es único porque es una de las pocas instancias en las que el estimador econométrico no fue simplemente “tomado prestado” de la estadística o importado de otro campo; las VI fueron inventadas por un economista, y su historia es fascinante.</p>
<section id="historia-de-las-variables-instrumentales-padre-e-hijo" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="historia-de-las-variables-instrumentales-padre-e-hijo"><span class="header-section-number">9.1</span> Historia de las Variables Instrumentales: Padre e Hijo</h2>
<p>La historia de las variables instrumentales está entrelazada con la vida de Philip Wright (nacido en 1861, fallecido en 1934) y su hijo, Sewall Wright (nacido en 1889). Philip fue un prolífico autor en economía, publicando en revistas destacadas como <em>Quarterly Journal of Economics</em> y <em>American Economic Review</em>. Un tema recurrente en sus publicaciones fue el <strong>problema de identificación</strong>, que buscó resolver intensamente.</p>
<p>En 1928, Philip estaba escribiendo un libro sobre aceites animales y vegetales, motivado por la creencia de que los recientes aumentos arancelarios estaban dañando las relaciones internacionales. Este libro se convertiría en un clásico, no por su contenido sobre aranceles, sino por contener la primera prueba de la existencia de un estimador de variables instrumentales. El cálculo del estimador de variables instrumentales se desarrolló en un apéndice (Apéndice B) de este libro. Philip agradeció a su hijo por sus valiosas contribuciones, refiriéndose al <strong>análisis de rutas</strong> que Sewall le había enseñado, el cual jugó un papel clave en el Apéndice B.</p>
<p>Sewall Wright, por su parte, revolucionaba el campo de la genética, inventando el análisis de rutas, precursor de los modelos gráficos acíclicos dirigidos de Pearl. Historiadores han debatido la autoría del Apéndice B, ya que pudo haber sido escrito por cualquiera de los dos, dado que el libro era de economía (Philip) pero usaba el análisis de rutas (Sewall). Stock y Trebbi (2003) utilizaron un <strong>análisis estilométrico</strong> para determinar la autoría, un método similar a las técnicas contemporáneas de aprendizaje automático. Recopilaron escritos conocidos de ambos hombres, y analizaron la frecuencia de 70 palabras de función y 18 construcciones gramaticales en bloques de 1,000 palabras. Sus resultados, basados en un análisis de regresión, atribuyeron <strong>todos los bloques del Apéndice B y el capítulo 1 a Philip, no a Sewall</strong>.</p>
<p>Aunque la redacción y la solución del problema de identificación son técnicamente distintas, esta historia destaca que un estimador econométrico tan importante como las variables instrumentales tiene sus raíces en la economía. También resalta la posibilidad de superar diferencias a través de colaboraciones intelectuales entre padre e hijo.</p>
</section>
<section id="intuición-de-las-variables-instrumentales" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="intuición-de-las-variables-instrumentales"><span class="header-section-number">9.2</span> Intuición de las Variables Instrumentales</h2>
<section id="el-dag-canónico-de-vi" class="level3" data-number="9.2.1">
<h3 data-number="9.2.1" class="anchored" data-anchor-id="el-dag-canónico-de-vi"><span class="header-section-number">9.2.1</span> El DAG Canónico de VI</h3>
<p>Para entender el estimador de variables instrumentales, es útil comenzar con un <strong>Diagrama Acíclico Dirigido (DAG)</strong> que ilustra una cadena de efectos causales. Considere un camino de puerta trasera entre una variable de tratamiento (D) y una variable de resultado (Y): (D U Y), donde (U) es una variable no observada por el econometrista. Si existe este tipo de <strong>selección en variables no observables</strong>, ninguna estrategia de condicionamiento (control) satisfará el criterio de puerta trasera con los datos disponibles.</p>
<p>Aquí es donde entra la variable instrumental (Z). El diseño de VI busca <strong>aislar la variación</strong> en el tratamiento que es puramente exógena, es decir, que no está influenciada por factores de confusión no observados. Piense en ello como un molde que permite que solo la forma deseada (el efecto causal) se manifieste, en lugar de esculpir el mármol quitando la variación indeseable. Un buen instrumento imita un experimento aleatorizado.</p>
<p>La intuición clave es que (Z) afecta a (Y) <strong>“solo a través de”</strong> (D). Esto significa que si (Z) varía, causa que (D) varíe, lo que a su vez causa que (Y) cambie, pero <em>solo</em> debido a la variación en (D). En otras palabras, (Z) debe ser <strong>independiente de las variables que determinan (Y) excepto por (D)</strong>. Esta es la <strong>restricción de exclusión</strong>. Además, (Z) debe estar correlacionada con (D); esta relación se conoce como la <strong>primera etapa</strong>.</p>
</section>
<section id="los-buenos-instrumentos-deben-parecer-extraños" class="level3" data-number="9.2.2">
<h3 data-number="9.2.2" class="anchored" data-anchor-id="los-buenos-instrumentos-deben-parecer-extraños"><span class="header-section-number">9.2.2</span> Los Buenos Instrumentos Deben Parecer Extraños</h3>
<p>¿Cómo saber si tiene un buen instrumento? Primero, requiere <strong>conocimiento previo</strong>. Debe poder defender teórica y lógicamente la <strong>restricción de exclusión</strong>, ya que es un supuesto no testeable. Los microeconomistas aplicados son cada vez más escépticos con las VI porque pueden contar historias ilimitadas en las que las restricciones de exclusión no se cumplen.</p>
<p>Una condición necesaria (aunque no suficiente) para un instrumento válido es que la gente se confunda cuando usted les explique su relación con el resultado. Por ejemplo, a nadie le sorprendería que el tamaño de la familia reduzca la oferta laboral de las mujeres. Pero, ¿qué pensarían si les dijera que las madres cuyos dos primeros hijos eran del mismo sexo trabajaban menos fuera del hogar que aquellas con un ratio de sexos equilibrado?. Esto es “extraño”, ya que la composición de género no parece lógicamente cambiar los incentivos laborales. Sin embargo, empíricamente, las familias con dos hijos del mismo sexo son más propensas a tener un tercero buscando diversidad de género, lo que afecta el tamaño de la familia y, por ende, la oferta laboral.</p>
<p>El “instrumento extraño” (tener dos niños o dos niñas) solo cambia el resultado (oferta laboral) al cambiar primero una variable de tratamiento endógena (tamaño de la familia). Sin conocimiento de la variable endógena, la relación entre el instrumento y el resultado no tiene sentido. Esto se debe a que el instrumento es irrelevante para los determinantes del resultado excepto por su efecto en la variable de tratamiento endógena. Los buenos instrumentos suelen ser <strong>cuasi-aleatorios</strong>.</p>
<p>Compare esto con un mal instrumento: si conocer a Kanye West te llevara a la fama. Esto sería un mal instrumento para el éxito musical, ya que hay muchas formas directas en que Kanye West puede afectar el éxito de un músico, sin pasar por una única variable de tratamiento, violando la restricción de exclusión. En resumen, los buenos instrumentos son <strong>chocantes</strong> precisamente por la restricción de exclusión; si la relación fuera obvia, la restricción de exclusión probablemente estaría violada.</p>
</section>
</section>
<section id="efectos-de-tratamiento-homogéneos-y-los-estimadores-de-dos-etapas-de-mínimos-cuadrados-2sls" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="efectos-de-tratamiento-homogéneos-y-los-estimadores-de-dos-etapas-de-mínimos-cuadrados-2sls"><span class="header-section-number">9.3</span> Efectos de Tratamiento Homogéneos y los Estimadores de Dos Etapas de Mínimos Cuadrados (2SLS)</h2>
<p>Las VI se utilizan típicamente para abordar el <strong>sesgo por variables omitidas</strong>, el <strong>error de medición</strong> y la <strong>simultaneidad</strong>. Por ejemplo, en el caso de la cantidad y el precio, que se determinan por la intersección de la oferta y la demanda, cualquier correlación observacional entre ellos no es informativa sobre las elasticidades de la oferta o la demanda. Philip Wright entendió este problema profundamente.</p>
<p>Asumiremos un <strong>efecto de tratamiento homogéneo</strong> (), que es el mismo para cada persona. Consideremos el problema clásico laboral de estimar el efecto causal de la escolaridad ((S)) en los ingresos ((Y)). La escolaridad es endógena debido a la <strong>habilidad no observada</strong> ((A)). El modelo verdadero sería: [ Y_i = + S_i + A_i + _i ] Donde () es un término de error no correlacionado con (S) o (A). Si (A) no se observa, estimamos: [ Y_i = + S_i + _i ] Donde (_i = A_i + _i). Si (S) está correlacionada con (A), entonces (S) está correlacionada con (_i), haciéndola endógena y sesgando la estimación de OLS.</p>
<p>Si encontramos un instrumento (Z_i) que causa más escolaridad pero es independiente de la habilidad ((A)) y del término de error estructural (()), podemos estimar (). El estimador de VI se puede expresar como el <strong>cociente de la covarianza de (Y) y (Z), y la covarianza de (S) y (Z)</strong>: [ = ] Esto es válido siempre que (C(A,Z)=0) y (C(,Z)=0), lo cual es el contenido estadístico de la <strong>restricción de exclusión</strong>: el instrumento debe ser independiente de ambas partes del término de error compuesto.</p>
<p>Pero la restricción de exclusión es solo una condición necesaria, no suficiente. El instrumento debe estar <strong>altamente correlacionado</strong> con la variable endógena (S) (la <strong>primera etapa</strong> debe ser fuerte). El numerador se llama a veces <strong>forma reducida</strong> (la relación entre el instrumento y el resultado), y el denominador es la <strong>primera etapa</strong>. Si (Z) no es independiente de (), o si la correlación entre (S) y (Z) es débil, el estimador () estará severamente sesgado en muestras finitas.</p>
<section id="dos-etapas-de-mínimos-cuadrados-2sls" class="level5" data-number="9.3.0.0.1">
<h5 data-number="9.3.0.0.1" class="anchored" data-anchor-id="dos-etapas-de-mínimos-cuadrados-2sls"><span class="header-section-number">9.3.0.0.1</span> 7.3.1 Dos Etapas de Mínimos Cuadrados (2SLS)</h5>
<p>El estimador de <strong>Dos Etapas de Mínimos Cuadrados (2SLS)</strong> es uno de los estimadores de VI más intuitivos. Dada la instrumentación de (S) con (Z), se descompone en dos pasos: 1. <strong>Primera etapa:</strong> Se predice la variable de tratamiento ((S)) usando el instrumento ((Z)) y otros controles. [ S_i = + Z_i + _i ] 2. <strong>Segunda etapa:</strong> Se usan los valores predichos de (S) (denotados ()) para estimar el efecto sobre el resultado ((Y)). [ Y_i = + _i + _i ] La intuición de 2SLS es que utiliza <strong>solo la variación en la escolaridad que es exógena</strong>, impulsada por el instrumento. Es como un experimento: al aislar la variación de (S) impulsada por (Z), estamos identificando efectos causales de cambios exógenos en (S). Sin embargo, esta variación exógena es solo un subconjunto de la variación total en la escolaridad, lo que reduce la información disponible para la identificación y puede generar errores estándar más grandes.</p>
</section>
</section>
<section id="el-problema-de-los-instrumentos-débiles" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="el-problema-de-los-instrumentos-débiles"><span class="header-section-number">9.4</span> El Problema de los Instrumentos Débiles</h2>
<p>Un <strong>instrumento débil</strong> es aquel que, aunque válido, predice la variable de tratamiento de manera insuficiente. Cuando la covarianza entre (Z) y (X) ((Cov(Z,X))) es pequeña, el estimador de IV ((Cov(Z,Y)/Cov(Z,X))) tiende a ser inestable y tener una alta variabilidad de muestreo. Además, el sesgo de 2SLS se acerca al sesgo de OLS si el instrumento es débil.</p>
<p>La forma más común de verificar la <strong>relevancia</strong> del instrumento es la <strong>estadística F de la primera etapa</strong>. Si esta estadística es baja, sugiere que el instrumento es débil. Bound, Jaeger, y Baker (1995) demostraron que añadir más instrumentos con poco poder predictivo puede hacer que la estadística F de la primera etapa se acerque a cero, aumentando el sesgo de 2SLS. Por ejemplo, en su replicación del estudio de Angrist y Krueger (1991) sobre la escolaridad, mostraron que al agregar instrumentos (como las interacciones de trimestre de nacimiento con el año), la estadística F de la primera etapa caía significativamente, señalando un problema de instrumentos débiles.</p>
<p>No existe un corte único para la estadística F, ya que el valor deseado depende de la cantidad de sesgo que uno esté dispuesto a aceptar. Stock y Yogo (2005) proporcionan tablas que relacionan la estadística F con el sesgo relativo de IV respecto al sesgo de OLS. Una regla general común, aunque muy aproximada, es que la estadística F debe ser 10 o superior.</p>
<p>Si se enfrenta a un problema de instrumentos débiles, las opciones son limitadas. Se podría usar un modelo justo identificado con el IV más fuerte, o un estimador de máxima verosimilitud de información limitada (LIML), que es aproximadamente insesgado para modelos de efectos constantes sobreidentificados. Sin embargo, la <strong>verdadera solución para un problema de instrumentos débiles es conseguir mejores instrumentos</strong>.</p>
</section>
<section id="efectos-de-tratamiento-heterogéneos" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="efectos-de-tratamiento-heterogéneos"><span class="header-section-number">9.5</span> Efectos de Tratamiento Heterogéneos</h2>
<p>Relajando el supuesto de que los efectos de tratamiento son los mismos para todos, introducimos los <strong>efectos de tratamiento heterogéneos</strong>, donde ((Y_i^1 - Y_i^0 = _i)) varía para cada individuo (i). Esto es crucial porque introduce una tensión entre la <strong>validez interna</strong> (el efecto causal se identifica para la población estudiada) y la <strong>validez externa</strong> (el hallazgo se aplica a poblaciones diferentes). Bajo efectos homogéneos no hay tensión, pero bajo heterogeneidad la tensión es enorme y puede minar la relevancia del efecto estimado.</p>
<p>Para la identificación bajo efectos heterogéneos, se requieren <strong>cinco supuestos</strong>: 1. <strong>Supuesto de Valor de Tratamiento Unitario Estable (SUTVA):</strong> Establece que los resultados potenciales para cada persona (i) no están relacionados con el estado de tratamiento de otros individuos. Rara vez se menciona o se toma en serio en estudios aplicados. 2. <strong>Supuesto de Independencia:</strong> El instrumento es independiente de los resultados potenciales y de las asignaciones de tratamiento potenciales. A menudo se describe como una asignación “tan buena como aleatoria”. Este supuesto es suficiente para una interpretación causal de la forma reducida. 3. <strong>Restricción de Exclusión:</strong> Cualquier efecto de (Z) sobre (Y) debe ser a través del efecto de (Z) sobre (D). Formalmente: (Y_i(D_i,0) = Y_i(D_i,1)). La aleatoriedad del instrumento (independencia) no implica automáticamente la restricción de exclusión. 4. <strong>Primera Etapa:</strong> (Z) debe estar correlacionada con la variable endógena (D), de modo que (E[D_i^1 - D_i^0] ). Este es el único supuesto testeable directamente a partir de los datos. 5. <strong>Monotonicidad:</strong> Requiere que la variable instrumental opere (débilmente) en la misma dirección para todas las unidades individuales. Es decir, si afecta a alguien, siempre lo hace en la misma dirección (positiva o negativa, pero no ambas). Sin este supuesto, los estimadores de IV no garantizan estimar un promedio ponderado de los efectos causales subyacentes del grupo afectado. Esto es importante porque si existen <strong>“Defiers”</strong> (personas que se ven afectadas en la dirección opuesta a lo esperado por el instrumento), el estimador de IV pierde su interpretación como un promedio.</p>
<p>Si se satisfacen los cinco supuestos, se tiene una estrategia de VI válida. Sin embargo, bajo efectos de tratamiento heterogéneos, el estimador de VI ya no recupera el efecto de tratamiento promedio (ATE) para toda la población, sino un <strong>efecto de tratamiento promedio local (LATE - Local Average Treatment Effect)</strong>. [ _{IV,LATE} = E] El LATE es el efecto causal promedio de (D) sobre (Y) para aquellos cuya situación de tratamiento fue cambiada por el instrumento (Z). Estas personas se conocen como <strong>“Compliers”</strong> (cumplidores). No identifica el efecto causal en los <strong>“Always-takers”</strong> (siempre-tomadores, quienes siempre reciben el tratamiento independientemente del instrumento) ni en los <strong>“Never-takers”</strong> (nunca-tomadores, quienes nunca reciben el tratamiento). Esto es importante porque el ATE poblacional es a menudo el de mayor interés, pero no siempre es posible con IV.</p>
<p>El <strong>LATE</strong> es “local” en el sentido de que es el efecto de tratamiento promedio solo para los compliers. En contraste, en el diseño tradicional de IV con efectos homogéneos, los compliers tienen los mismos efectos de tratamiento que los no-compliers, por lo que la distinción es irrelevante.</p>
<p>Ahora, exploremos algunas aplicaciones reales de las variables instrumentales.</p>
</section>
<section id="ejemplo-conscripción-y-crimen-evidencia-de-la-lotería-del-servicio-militar-obligatorio-en-argentina" class="level2" data-number="9.6">
<h2 data-number="9.6" class="anchored" data-anchor-id="ejemplo-conscripción-y-crimen-evidencia-de-la-lotería-del-servicio-militar-obligatorio-en-argentina"><span class="header-section-number">9.6</span> Ejemplo: Conscripción y Crimen: Evidencia de la Lotería del Servicio Militar Obligatorio en Argentina</h2>
<p>Este ejemplo se basa en el estudio de Galiani, Rossi, y Schargrodsky (2010), que busca estimar el efecto causal de la participación obligatoria en el servicio militar en las actividades delictivas.</p>
<p><strong>Contexto del Problema:</strong> Se ha afirmado que el servicio militar obligatorio (conscripción) podría tener un impacto en el comportamiento criminal de los jóvenes. Existen hipótesis contradictorias: podría tener una influencia positiva al enseñar disciplina, mejorar la salud y las perspectivas laborales, o incapacitar la comisión de delitos al mantener a los jóvenes en instalaciones militares. Alternativamente, podría tener una influencia negativa al retrasar la inserción laboral, proporcionar entrenamiento con armas o crear un ambiente social propenso a respuestas violentas y efectos negativos de pares. La literatura previa se centró principalmente en veteranos de guerra (como el draft de Vietnam), lo que podría introducir sesgos por el trauma de combate. El objetivo de este estudio es estimar el efecto causal del servicio militar en <strong>tiempos de paz</strong>.</p>
<p><strong>El Experimento Natural y el Instrumento:</strong> Para identificar el efecto causal, los autores explotan la <strong>asignación aleatoria de jóvenes al servicio militar en Argentina a través de una lotería de conscripción</strong>. El servicio militar fue obligatorio en Argentina de 1901 a 1995. La elegibilidad se asignaba anualmente mediante una lotería que emparejaba un número (del 1 al 1,000) con los últimos tres dígitos del documento de identidad nacional de los individuos. Después, se anunciaba un número de corte: aquellos con números de lotería por encima del corte y que pasaban un examen médico eran llamados a servir. El instrumento en este estudio es la variable dummy <strong>“Draft Eligible” (Elegible para el Servicio Militar)</strong>, que toma el valor de uno si el número de lotería asignado a un individuo lo hacía elegible, y cero en caso contrario. Por diseño, esta variable se asigna aleatoriamente.</p>
<p><strong>Datos Utilizados:</strong> Los autores utilizaron un conjunto único de <strong>datos administrativos</strong>. * <strong>Registros criminales:</strong> Información sobre todos los hombres con antecedentes penales en el sistema de justicia para adultos desde 1934 hasta 2005 (aproximadamente un millón de observaciones), incluyendo los últimos tres dígitos del DNI y el año de nacimiento. Un antecedente penal significa que el individuo fue procesado o condenado por un delito. Otro conjunto de datos, más corto (2000-2005), incluye el <strong>tipo de delito</strong> (armas, propiedad, ataque sexual, etc.). * <strong>Datos de servicio militar:</strong> Resultados de la lotería del servicio militar, estado del servicio militar y números de corte del Ejército Argentino. * <strong>Datos del mercado laboral:</strong> Participación en el mercado laboral formal (contribuciones a la seguridad social), tasas de desempleo e ingresos (derivados de la ocupación declarada en el registro nacional de votantes de 2003).</p>
<p>La unidad de observación principal es la combinación de cohorte de nacimiento y los últimos tres números de identificación. Los autores se enfocan en las cohortes de 1958 a 1962, para las cuales tienen información tanto sobre la intención de tratar como sobre el estado de tratamiento real. También se dispone de datos sobre características previas al tratamiento para estas cohortes, como origen y distrito de residencia.</p>
<p><strong>Validación de la Aleatoriedad:</strong> Aunque la elegibilidad se asignó aleatoriamente, los autores examinaron si las <strong>características previas al tratamiento estaban equilibradas</strong> entre los grupos elegibles y exentos. La Tabla 2 (fuente: NDL2010-055.pdf) muestra que, para la mayoría de las variables, <strong>no hay diferencias estadísticamente significativas</strong>, lo que sugiere que la aleatorización de la elegibilidad tuvo éxito. En los pocos casos de diferencias significativas, estas eran pequeñas y no alteraban los resultados principales al incluirse como controles.</p>
<p>Los autores también analizaron los resultados de los exámenes médicos previos a la inducción. Aunque las tasas de fracaso eran más altas para el grupo elegible (Tabla 3), esto se debía a que los individuos con números bajos (no elegibles) tenían menos incentivos para falsear sus condiciones médicas. Cuando se controló por estas diferencias de incentivos (examinando solo a los individuos con números de lotería cercanos al corte), las tasas de fracaso se equilibraron, lo que <strong>proporciona más evidencia de la exogeneidad de la elegibilidad</strong> y sugiere que los exámenes médicos fueron manipulados. Esta manipulación hace que el estado de servicio militar sea endógeno, pero no afecta la consistencia del estimador de IV.</p>
<p><strong>Resultados Principales - Primera Etapa:</strong> Los resultados de la primera etapa (Tabla 4 en la fuente) muestran una <strong>fuerte relación entre la elegibilidad para el servicio militar y la probabilidad de servir</strong>. Para los hombres de las cohortes de 1958 a 1962, la probabilidad de servir en el ejército fue <strong>66 puntos porcentuales más alta</strong> para los del grupo elegible en comparación con los exentos. Todos los efectos de la primera etapa están estimados con gran precisión y son significativamente diferentes de cero.</p>
<p><strong>Resultados Principales - Efecto en la Criminalidad (LATE):</strong> El estimador de VI, bajo supuestos razonables (incluida la monotonicidad), recupera el <strong>Efecto de Tratamiento Promedio Local (LATE)</strong>. En este contexto, el LATE es el efecto promedio de la participación en el servicio militar en aquellos individuos cuyo estado de tratamiento fue inducido a cambiar por el instrumento: los <strong>“compliers”</strong> (cumplidores). Estos son hombres que sirvieron porque fueron asignados a un número de lotería alto, pero no habrían servido de otra manera. Los resultados, por lo tanto, <strong>no necesariamente se generalizan a la población de voluntarios o a aquellos que nunca habrían servido</strong>.</p>
<p>Los resultados de 2SLS (Tabla 5 en la fuente) indican que el <strong>servicio militar obligatorio aumenta significativamente las tasas de criminalidad</strong>. Los estimadores 2SLS preferidos en la columna (4) muestran que el servicio militar aumenta las tasas de criminalidad en un <strong>3.96%</strong>. Esto implica que la conscripción elevaría la probabilidad de ser procesado o condenado en la vida adulta en 0.27 puntos porcentuales, desde una tasa de referencia del 6.8% a un 7.07%. En términos porcentuales, esto es aproximadamente un tercio del efecto positivo de un año adicional de escolaridad en la reducción de la encarcelación.</p>
<p><strong>Análisis de Heterogeneidad y Canales:</strong> * <strong>Servicio en tiempos de paz vs.&nbsp;guerra:</strong> El efecto de la conscripción sobre el crimen es <strong>mayor para aquellos reclutas en las cohortes que participaron en la Guerra de Malvinas</strong> (1982), aunque el efecto sigue siendo significativo para las cohortes que sirvieron en tiempos de paz, que constituyen la mayor parte de la muestra (Tabla 6). Esto destaca la distinción entre el trauma de combate y los efectos generales de la conscripción. * <strong>Duración del servicio:</strong> El efecto sobre el crimen fue <strong>mayor para quienes sirvieron en la Armada (dos años) en comparación con el Ejército o la Fuerza Aérea (un año)</strong> (Tabla 6). Este resultado es consistente con la hipótesis de que las experiencias tempranas en el mercado laboral son un canal a través del cual el servicio militar afecta el comportamiento criminal. * <strong>Tipo de delito:</strong> El servicio militar aumenta la probabilidad de desarrollar un expediente criminal, especialmente para <strong>delitos pecuniarios</strong> (contra la propiedad y de cuello blanco) (Tabla 7). Esto apoya la idea de que la conscripción podría afectar negativamente las perspectivas laborales de los jóvenes, llevándolos a cometer este tipo de delitos. * <strong>Resultados en el mercado laboral:</strong> El estudio encuentra que los hombres que sirvieron en el ejército tienen una <strong>menor probabilidad de participar en el mercado laboral formal, una tasa de desempleo más alta (aunque no significativa) y menores ingresos futuros</strong> (Tabla 8). Estos hallazgos de efectos perjudiciales a largo plazo en el mercado laboral respaldan la hipótesis de que la conscripción aumenta la criminalidad a través de este canal.</p>
<p><strong>Pruebas de Falsificación (Experimentos Falsos):</strong> Para reforzar la exogeneidad del instrumento, los autores realizaron tres “experimentos falsos”: 1. <strong>Restricción a números de lotería bajos:</strong> Dividieron el grupo no elegible por la mediana y asignaron un “falso estatus de tratamiento”. No encontraron diferencias en las tasas de criminalidad entre estos grupos, lo que confirma la aleatoriedad de la lotería. 2. <strong>Cohortes no reclutadas:</strong> Analizaron las cohortes de 1956 y 1957, que saltaron el servicio militar debido a un cambio de edad. Al imputarles resultados de lotería de cohortes posteriores, no se observaron diferencias significativas en las tasas de criminalidad, como era de esperar. 3. <strong>Lotería sin incorporación:</strong> La cohorte de 1976 pasó por la lotería pero no fue incorporada al servicio militar. Al crear un “falso número de corte”, no se encontraron diferencias en las tasas de criminalidad entre los grupos “elegibles” y “no elegibles” falsos. Esta prueba es importante porque aborda la preocupación de que el resultado de la lotería pudiera tener un efecto directo en la moral de los jóvenes, independientemente de la participación real en el servicio.</p>
<p>En conclusión, este estudio demuestra de manera convincente un <strong>efecto causal de la conscripción en tiempos de paz en el aumento de la probabilidad de desarrollar un expediente criminal</strong>. Los hallazgos sugieren que, a pesar de los posibles beneficios (disciplina, incapacitación), los mecanismos que operan en la dirección opuesta (retraso en la inserción laboral) dominan, llevando a mayores tasas de criminalidad, especialmente en delitos pecuniarios.</p>



</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./reg_discontinua.html" class="pagination-link" aria-label="Regresión discontinua">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Regresión discontinua</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link" aria-label="Referencias">
        <span class="nav-page-text">Referencias</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Diseños experimentales y cuasiexperimentales - Ignacio Spiousas.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Este libro fue creado con <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>